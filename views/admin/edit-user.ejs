<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard - Edit User</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Flaticon UI Icons -->
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-bold-rounded/css/uicons-bold-rounded.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-solid-rounded/css/uicons-solid-rounded.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-bold-rounded/css/uicons-bold-rounded.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-bold-straight/css/uicons-bold-straight.css'>
  <link rel="stylesheet" href="/font.css">
</head>
<body class="bg-gray-50">
  <!-- Layout grid: sidebar kiri, konten utama, sidebar kanan -->
  <div class="grid grid-cols-[1.5fr_8fr_1.5fr] min-h-screen">
    
    <!-- Sidebar Kiri -->
    <div class="leftsidebar pr-2">
      <%- include('../partials/leftsidebar') %>
    </div>
    
    <!-- Konten Utama -->
    <main class="content p-10">
      <!-- Breadcrumb Navigation -->
      <nav class="text-sm mb-2 flex space-x-2 justify-left items-center text-center">
        <a href="/admin/dashboard" class="flex items-center text-gray-500 font-regular hover:text-gray-700">
          <i class="fi fi-rr-house-chimney mr-2 inline-flex items-center justify-center text-gray-500"></i>
          <span>Dashboard</span>
        </a>
        <i class="fi fi-rr-angle-small-right text-sm text-gray-500 inline-flex items-center justify-center"></i>
        <a href="/admin/users" class="flex items-center text-gray-500 font-regular hover:text-gray-700">
          <i class="fi fi-rr-users mr-2 inline-flex items-center justify-center text-gray-500"></i>
          <span>Users</span>
        </a>
        <i class="fi fi-rr-angle-small-right text-sm text-gray-500 inline-flex items-center justify-center"></i>
        <a href="" class="flex items-center text-gray-800 font-medium">
          <i class="fi fi-br-user-pen mr-2 inline-flex items-center justify-center text-gray-800"></i>
          <span>Edit User</span>
        </a>
      </nav>

      <!-- Header Section -->
      <div class="mb-5 mt-5">
        <h1 class="text-3xl font-bold text-gray-800">Edit User</h1>
        <p class="text-gray-600 mt-2">Perbarui informasi pengguna secara akurat.</p>
      </div>
      
      <!-- Form Container -->
      <div class="bg-white p-6 rounded-lg">
        <form action="/admin/users/edit/<%= user.id_user %>" method="POST" enctype="multipart/form-data" class="space-y-6">
          <!-- Row: Kolom kiri 50% & Kolom kanan 50% -->
          <div class="flex flex-col lg:flex-row gap-6">
            <!-- Kolom Kiri: Field selain foto -->
            <div class="w-full lg:w-1/2 space-y-6">
              <!-- Full Name -->
<div>
  <label class="block text-gray-800 font-medium mb-1">Full Name</label>
  <div class="inline-flex items-center justify-center bg-gray-50 rounded-lg px-3 py-2 w-full">
    <i class="fi fi-rr-id-badge text-gray-800 mr-2 inline-flex items-center justify-center"></i>
    <input type="text" name="fullname" value="<%= user.fullname %>" required maxlength="50"
           class="w-full bg-transparent outline-none text-gray-800" placeholder="Full Name">
  </div>
</div>

<!-- Username -->
<div>
  <label class="block text-gray-800 font-medium mb-1">Username</label>
  <div class=" inline-flex items-center justify-center bg-gray-50 rounded-lg px-3 py-2 w-full">
    <i class="fi fi-rr-fingerprint text-gray-800 mr-2 inline-flex items-center justify-center"></i>
    <input type="text" name="username" value="<%= user.username %>" required maxlength="10"
           class="w-full bg-transparent outline-none text-gray-800" placeholder="Username">
  </div>
</div>

              
              <!-- Role -->
              <div>
                <label class="block text-gray-800 font-medium mb-1">Role</label>
                <div class="inline-flex items-center justify-center bg-gray-50 rounded-lg px-3 py-2 w-full relative">
                  <i class="fi fi-rr-user-gear text-gray-800 mr-2 inline-flex items-center justify-center"></i>
                  <select name="role" required 
                          class="w-full bg-transparent outline-none appearance-none text-gray-800">
                    <option value="admin" <%= user.role === 'admin' ? 'selected' : '' %>>Admin</option>
                    <option value="user" <%= user.role === 'user' ? 'selected' : '' %>>User</option>
                  </select>
                  <!-- Dropdown Icon -->
                  <div class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-gray-800">
                    <svg class="h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none"
                         viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M19 9l-7 7-7-7" />
                    </svg>
                  </div>
                </div>
              </div>
              
              <!-- Jabatan -->
              <div>
                <label class="block text-gray-800 font-medium mb-1">Jabatan</label>
                <div class="inline-flex items-center justify-center bg-gray-50 rounded-lg px-3 py-2 w-full relative">
                  <i class="fi fi-rr-rank text-gray-800 mr-2 inline-flex items-center justify-center"></i>
                  <select name="jabatan" required 
                          class="w-full bg-transparent outline-none appearance-none text-gray-800">
                    <option value="Manager" <%= user.jabatan === 'Manager' ? 'selected' : '' %>>Manager</option>
                    <option value="Supervisor" <%= user.jabatan === 'Supervisor' ? 'selected' : '' %>>Supervisor</option>
                    <option value="Staff" <%= user.jabatan === 'Staff' ? 'selected' : '' %>>Staff</option>
                  </select>
                  <!-- Dropdown Icon -->
                  <div class="pointer-events-none absolute inset-y-0 right-3 flex items-center">
                    <svg class="h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none"
                         viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M19 9l-7 7-7-7" />
                    </svg>
                  </div>
                </div>
              </div>
              
              <!-- Tanggal Masuk -->
              <div>
                <label class="block text-gray-800 font-medium mb-1">Tanggal Masuk</label>
                <div class="inline-flex items-center justify-center bg-gray-50 rounded-lg px-3 py-2 w-full">
                  <i class="fi fi-rr-calendar-lines text-gray-800 mr-2 inline-flex items-center justify-center"></i>
                  <input type="date" name="tanggal_masuk" value="<%= user.tanggal_masuk ? new Date(user.tanggal_masuk).toISOString().split('T')[0] : '' %>" required 
                         class="w-full bg-transparent outline-none text-gray-800" placeholder="Tanggal Masuk">
                </div>
              </div>
              
              <!-- Status -->
              <div>
                <label class="block text-gray-800 font-medium mb-1">Status</label>
                <div class="inline-flex items-center justify-center bg-gray-50 rounded-lg px-3 py-2 w-full relative">
                  <i class="fi fi-rr-toggle-on text-gray-800 mr-2 inline-flex items-center justify-center"></i>
                  <select name="status" required 
                          class="w-full bg-transparent outline-none appearance-none text-gray-800">
                    <option value="aktif" <%= user.status === 'aktif' ? 'selected' : '' %>>Aktif</option>
                    <option value="tidak_aktif" <%= user.status === 'tidak_aktif' ? 'selected' : '' %>>Tidak Aktif</option>
                  </select>
                  <!-- Dropdown Icon -->
                  <div class="pointer-events-none absolute inset-y-0 right-3 flex items-center">
                    <svg class="h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none"
                         viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M19 9l-7 7-7-7" />
                    </svg>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Kolom Kanan: Foto -->
            <div class="w-full lg:w-1/2">
              <div class="flex flex-col items-center space-y-4">
                <!-- Foto Besar (diperbesar 2x) -->
                <div class="w-[28rem] h-[28rem] rounded-full overflow-hidden bg-gray-100 flex items-center justify-center">
                  <% if (user.foto) { %>
                    <img src="data:image/jpeg;base64,<%= user.foto.toString('base64') %>" 
                         alt="Profile Photo" class="w-full h-full object-cover">
                  <% } else { %>
                    <img src="https://via.placeholder.com/448" 
                         alt="Default Profile" class="w-full h-full object-cover">
                  <% } %>
                </div>
                <!-- Label dan Tombol Choose File -->
                <div class="w-full">
                  <label class="block text-gray-800 font-medium mb-1">Foto</label>
        
                    <label for="foto" class="cursor-pointer inline-flex items-center justify-start bg-gray-50 text-gray-800 font-regular rounded-lg px-3 py-2 w-full">
                      <i class="fi fi-rr-portrait mr-2 inline-flex items-center justify-center"></i>
                      Choose File
                    </label>
                    <input type="file" id="foto" name="foto" accept="image/*" class="hidden">
          
                </div>
              </div>
            </div>
          </div>
          
          <!-- Submit Button -->
          <div>
            <button type="submit" class="inline-flex items-center justify-center bg-gray-800 text-white font-regular rounded-lg px-3 py-2 w-full">
              <i class="fi fi-rr-disk mr-2 inline-flex items-center justify-center"></i>
              Save
            </button>
          </div>
        </form>
      </div>
      
    </main>
    
    <!-- Sidebar Kanan -->
    <div class="rightsidebar pl-2">
      <%- include('../partials/rightsidebar') %>
    </div>
  </div>
</body>
</html>
